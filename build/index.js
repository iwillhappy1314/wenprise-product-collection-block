(()=>{"use strict";const e=window.ReactJSXRuntime,{registerBlockType:t}=wp.blocks,{InspectorControls:a}=wp.blockEditor,{PanelBody:o,SelectControl:s,RangeControl:n}=wp.components,{useState:l,useEffect:p}=wp.element,{apiFetch:r}=wp,{__}=wp.i18n,u=wp.serverSideRender;t("wenprise/products-by-tags",{title:__("Product Collection","wenprise-products-by-tags"),icon:"grid-view",category:"woocommerce",attributes:{taxonomyType:{type:"string",default:"product_tag"},tagId:{type:"string",default:""},columns:{type:"number",default:4},tabletColumns:{type:"number",default:3},mobileColumns:{type:"number",default:2},columnGap:{type:"number",default:32},tabletColumnGap:{type:"number",default:24},mobileColumnGap:{type:"number",default:16},rowGap:{type:"number",default:32},tabletRowGap:{type:"number",default:24},mobileRowGap:{type:"number",default:16},productsCount:{type:"number",default:12}},edit:function(t){const{attributes:c,setAttributes:i}=t,[b,m]=l([]),[d,g]=l(!1),y=[{label:__("Product Tags","wenprise-products-by-tags"),value:"product_tag"},{label:__("Product Categories","wenprise-products-by-tags"),value:"product_cat"},{label:__("Product Collections","wenprise-products-by-tags"),value:"product_collection"}],w={product_tag:__("Tag","wenprise-products-by-tags"),product_cat:__("Category","wenprise-products-by-tags"),product_collection:__("Collection","wenprise-products-by-tags")};p((()=>{c.taxonomyType&&x(c.taxonomyType)}),[c.taxonomyType]);const x=async e=>{g(!0);try{const t=(await r({path:`/wp/v2/${e}?per_page=100`})).map((e=>({label:e.name,value:e.id.toString()})));m(t)}catch(e){console.error("Error loading taxonomy terms:",e),m([])}g(!1)};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(a,{children:[(0,e.jsxs)(o,{title:__("Block Settings","wenprise-products-by-tags"),children:[(0,e.jsx)(s,{label:__("Select Taxonomy","wenprise-products-by-tags"),value:c.taxonomyType,options:y,onChange:e=>{i({taxonomyType:e,tagId:""})}}),(0,e.jsx)(s,{label:__("Select","wenprise-products-by-tags")+" "+w[c.taxonomyType],value:c.tagId,options:[{label:__("Please select","wenprise-products-by-tags"),value:""},...b],onChange:e=>i({tagId:e})})]}),(0,e.jsxs)(o,{title:__("Layout Settings","wenprise-products-by-tags"),initialOpen:!0,children:[(0,e.jsxs)("h3",{className:"components-base-control",children:[__("Desktop","wenprise-products-by-tags")," (≥1024px)"]}),(0,e.jsx)(n,{label:__("Columns","wenprise-products-by-tags"),value:c.columns,onChange:e=>i({columns:e}),min:1,max:6}),(0,e.jsx)(n,{label:__("Column Gap","wenprise-products-by-tags")+" (px)",value:c.columnGap,onChange:e=>i({columnGap:e}),min:0,max:100}),(0,e.jsx)(n,{label:__("Row Gap","wenprise-products-by-tags")+" (px)",value:c.rowGap,onChange:e=>i({rowGap:e}),min:0,max:100}),(0,e.jsxs)("h3",{className:"components-base-control",children:[__("Tablet","wenprise-products-by-tags")," (≥768px)"]}),(0,e.jsx)(n,{label:__("Columns","wenprise-products-by-tags"),value:c.tabletColumns,onChange:e=>i({tabletColumns:e}),min:1,max:4}),(0,e.jsx)(n,{label:__("Column Gap","wenprise-products-by-tags")+" (px)",value:c.tabletColumnGap,onChange:e=>i({tabletColumnGap:e}),min:0,max:80}),(0,e.jsx)(n,{label:__("Row Gap","wenprise-products-by-tags")+" (px)",value:c.tabletRowGap,onChange:e=>i({tabletRowGap:e}),min:0,max:80}),(0,e.jsxs)("h3",{className:"components-base-control",children:[__("Mobile","wenprise-products-by-tags")," (<768px)"]}),(0,e.jsx)(n,{label:__("Columns","wenprise-products-by-tags"),value:c.mobileColumns,onChange:e=>i({mobileColumns:e}),min:1,max:2}),(0,e.jsx)(n,{label:__("Column Gap","wenprise-products-by-tags")+" (px)",value:c.mobileColumnGap,onChange:e=>i({mobileColumnGap:e}),min:0,max:50}),(0,e.jsx)(n,{label:__("Row Gap","wenprise-products-by-tags")+" (px)",value:c.mobileRowGap,onChange:e=>i({mobileRowGap:e}),min:0,max:50}),(0,e.jsx)(n,{label:__("Number of Products","wenprise-products-by-tags"),value:c.productsCount,onChange:e=>i({productsCount:e}),min:1,max:48})]})]}),(0,e.jsx)("div",{className:"wc-block-products-by-tag",children:d?(0,e.jsx)("p",{children:__("Loading...","wenprise-products-by-tags")}):c.tagId?(0,e.jsx)(u,{block:"wenprise/products-by-tags",attributes:c}):(0,e.jsx)("p",{children:__("Please select a term in the sidebar settings","wenprise-products-by-tags")})})]})},save:function(){return null}})})();